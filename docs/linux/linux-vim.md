---
title: vim
---

## 基础操作

-   模式
    -   `V|v` 视觉选择模式
    -   多行编辑
        -   `ctrl+v`
        -   `选择要操作行`的第一格
        -   停留在`最后一行`，输入`大写I` 进入`插入模式`并更改
        -   `esc`
    -   `i` （inner）字符
        -   `viw`:精准选择光标所在的字符
        -   `vi"`:精准选择光标所在的双引号内的字符
        -   拓展:`vi(`、`vi[`、`vit`....:`t代表标题`
        -   拓展:`di(`、`di"`、`dit`....:删除范围内的字符
        -   `v}`:选择段落（可以与移动的符号联合起来用）
    -   `a` 字符
    -   编辑模式下 Ctrl+w 删除一个单词
        与 i 一样，但是操作的对象包括符号
-   移动
    -   右下上左 -> `H、J、K、L`(vim-adventures.com)
    -   页尾、首行、行尾、行头 -> `G、gg、$、^|0`
    -   单词跳跃、段落跳跃 -> `w|W、{}`
    -   跳跃一点点 -> `gj、gk `
    -   `f|F + 字母` -> 从光标处跳到下一个或上一个该字母的位置
    -   定位到页面上中下 -> `zz zt zb`
    -   数字 + gg -> 跳到数字行
    -   `ctrl+b|f`:上下反野
    -   `{}`:段落跳跃
    -   `b`:上一个单词开头
    -   `e`:下一个单词结尾
-   折行

    -   `zf`:zb、l 等展开
    -   `zfip`:折叠段落

-   搜索
    -   搜索 / -> `N|n` 上下搜索 (`:set hlsearch` 匹配高亮)
    -   直接搜索 -> `*` 搜索游标所在的词
-   复制、粘贴
    -   `y`
        -   暂存器`"[a-zA-Z0-9]`随意使用
        -   系统剪切板`"+yy`,`"+p`
        -   `"ay`: 将内容复制到暂存器 a 中
        -   `"ap`: 粘贴暂存器 a 的内容
        -   `:reg`:查看暂存器内容
        -   `:set clipboard=unnamed`:与系统共享剪切板 plug
    -   `p`:p 向后粘贴、P 向前粘贴
-   删除
    -   `d`
    -   `c`:删除并进入插入模式
    -   `C`:删除当前位置到结尾并进入插入模式
    -   `x|X`:直接删除游标所在字符，退格，删除光标前面的字符
-   替换

    -   `r`:替换
    -   `~`:大小写转换
    -   命令替换
        -   `:[range]s/key/newkey/[option]`
        -   `range`

            -   `1,20`:1 到 20 行
            -   `%`:全局
            -   `1,.`: 替换第一行到当前行
            -   `.,$`:替换当前行到最后一行
            -   `1,$`: 替换第一行到最后一行,相当于 :%s

        -   `s`:替换
        -   `key`:
            -   特殊字符用\转义:将`"123\\"` 替换成 `'123//'` 的指令为`:s/\"123\/\/\"/\'123\\\\\'/g`
        -   `newkey`
        -   `option`: -`g`:全局 -`c`:确认 -`p`:结果逐行显示 -`/gcp`:组合写法

-   撤销、反撤销
    -   `u、ctrl+r`
-   缩进
    -   `>>`
    -   `3>>`
    -   选择代码 + =号:自动缩进
    -   设置缩进长度 :set shiftwidth=n
-   直接打开新文件
    -   `:e filepath`
    -   `:e`:刷新当前文件
    -   `:tabe xxx,:e filepath`:新建 tab 页再打开文件
    -   `gt|gT`:切换 tab 页
    -   `vim -p files`:通过 tab 页方式打开多个文件
-   多文件操作
    - vim file file2 filee ...
    - `:ls`:查看当前窗口文件列表以及`编号`
    - `C+6 或 e#`:回到前一个打开的文件
    - `n C+6`:直接切换到第`编号为`n的文件
    - `:bn`:下一个文件
    - `:bp`:上一个文件
-   水平垂直分屏`:new|vnew`
    `ctrl+w ,w`:切换窗格
    `ctrl+w ,j`:向下切换
    `ctrl+w ,k`:向上切换
    `ctrl+w ,h`:向左切换
    `ctrl+w ,l`:向右切换
-   环绕操作

    -   `d s <existing char> 删除两边的指定字符`
    -   `c s <existing char> <desired char> 修改两边的指定字符`
    -   `y s <motion> <desired char> 修改两边字符`
    -   `S <desired char> visual modes 选中指定字符中间的内容`
        -   `"test" 输入 cs"'修改为 'test'`
        -   `"test" 输入ds" 修改为 test`
        -   `"test" 输入 cs"t 123>修改为<123>test</123>`
        -   `test 输入 ysaw) 修改为 (test)`

-   其他
    -   重复上一次操作
        -   小数点` .`
    -   合并行:或合并选择的行 pacman -R $(pacman -Qdtq)
        -   `J`
    -   编辑模式下 Ctrl+w 删除一个单词
    -   编辑模式下 Ctrl+u 删除到行头
    -   `:! ls xxx`:暂时离开做一件事情
    -   `:r !ls xxx`:将查到的东西粘贴到文件中
    -   `vimtutor zh_zw`:练习
    -   `:h xxx`:帮助
    -   `.`：重复命令
### 宏操作
-   q+宏名(随便一个字母)
-   操作完成，再按q结束宏录制
-   @宏名使用对应指令
-   9@宏名，使用9次
-   或:指令模式下`:%normal! @d` %每一行,normal模式下 使用宏d
-   :'<,'> normal @d :可是快,选择的行执行宏(:xxxg/^/ norm @a)

## 词法

### 介绍

-   名词
    -   `w:word` 单词
    -   `s:sentence` 句子
    -   `p:paragraph` 段落
    -   `t:tag` 标签
    -   `'`、`"`、`()`、`{}`、`[]`
-   动词

    -   `y:yank`:复制
    -   `p:paste`:粘贴
    -   `d:delete`:删除
    -   `c:change`:修改

    -   `v`:选择

-   范围
    -   `i`:在什么什么之内
    -   `a`
-   量词
    -   数字

### 组合

-   `vis`:选择一句话
-   `vi"`:选择单引号内
-   `v3w`
-   `d3w`
-   `3dd`
-   `....`

### vscodevim

-   `gd` - Go to definition, 跳转到定义。
-   `gb` - 找出与光标下相同的下一个单词, 并添加一个光标 ，接下来就可以同时修改。
-   `gh` - 等同于将鼠标移至光标所在单词, 方便查看定义以及报错
---
## 键盘字符功能
### 第二行
-   `~ or 反点`:`~`大小写转换，`返点`跳转到m设置的标注(\`a)
-   `!`:ex命令模式下执行外部指令`:!ls`,或强制保存或退出`:wq!`
    -   :! sh %   直接执行当前文件
-   `@`:运行宏
-   `#`:上一个索引(?)
-   `$`:行尾
-   `%`:括号匹配(定位到括号的另一边)
-   `^`:行首
-   `&`:(?)
-   `*`:下一个索引(?)
-   `(`:句子首
-   `) or 0`:`)`下一句首,`0`行首
-   `-`:前一行行首
-   `+ or =`:`+`后一行行首，`=`自动格式化
### 第三行
-   `Q or q`:`Q`切换ex模式，`q`录制宏(qa)
-   `W or w`:都是跳转下一个单词`词头`
-   `E or e`:都是跳转下一个单词`词尾`
-   `R or r`:`R`进入单字符修改模式(否则修改多个每次都要先按r),`r`单字符修改
-   `T or t`:(?)
-   `Y or y`:`Y`拷贝行，`y`拷贝,灵活组合使用
-   `U or u`:`U`撤销光标所在行内命令，`u`撤销命令
-   `I or i`:`I`进入插入模式并定位到行首,`i`进入插入模式定位到当前字符前
-   `O or o`:`O`进入插入模式并分段定位前一行,`o`进入插入模式并分段定位下一行
-   `P or p`:`P`向前粘贴，`p`向后粘贴
-   `{ or [`:`{`段首，`[[`文尾(gg)
-   `{ or [`:`}`段尾，`]]`文头(G)
### 第四行
-   `A or a`:`A`进入插入模式并定位到行尾,`i`进入插入模式定位到当前字符后
-   `S or s`:`S`删除行并进入插入模式，`s`删除字符并进入插入模式
-   `D or d`:`D`删除至行尾，`d`删除功能灵活组合使用
-   `F or f`:`F`单字符反向查找，`f`单字符正向查找(f,输入要查找的字符,f/F上一个下一个)
-   `G or g`:G,gg,ngg，行跳转灵活组合使用
-   `H or h`:`H`屏幕顶行，`h`左箭头
-   `J or j`:`J`合并两行，`j`下箭头
-   `K or k`:`K`帮助文档，`k`上箭头
-   `L or l`:`L`屏幕底行，`l`右箭头
-   `: or ;`:`:`ex模式，`;`重复t/T/f/F
-   `" or '`：`"`寄存器，`"ayy`设置寄存器a，作用是yy,通过`:reg`查看， `'`(?)
-   `| or \`:`|`行首，`\`未用

### 第五行
-   `Z or z`:`Z`(?),`zz`如果行数足够，能将当前干定位到屏幕中间
-   `X or x`:`X`退格删除字符,`x`删除光标所在一个字符      
-   `C or c`:`C`修改至行尾,`c`修改，灵活结合使用
-   `V or v`:`V`可视模式，单位行，`v`:可视模式,单位个，灵活结合使用
-   `B or b`:`B`前一个单词，首字符（空格分）,`b`前一个单词首字符,首字符（特殊符号）
-   `N or b`:`N`查找上一处，`n`查找下一处
-   `M or m`:`M`到屏幕中间行,`m`设置标注(ma),通过返点a定位
-   `< or ,`:`<`两下反缩进，`,`反向t/T/f/F(作为 leader键使用)
-   `> or .`:`>`按两下缩进，`.`重复上一次操作
-   `? or /`:`?`向前搜索，`/`向后搜索

